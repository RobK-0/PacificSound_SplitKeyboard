# PacificSound_SplitKeyboard
Custom Column Stagger Split Keyboard

This keyboard is an initial attempt at making a custom ergonomic column stagger split keyboard. It was the result of wanting to design a column stagger keyboard that operated using the STM32F4XX development boards (BlackPill). The generation of the PCB contained here was a result of a PCB promotion that offered free prototypes so long as they fit within 150mm X 100mm so I rearranged things to fit in. I also wanted to be sure I could make use of the SPI capability on these boards to (theoretically) be able to maximize data transfer between the halves limit latency. The plan is also to explore the use of DMA for fast transfers and RTOS for scheduling. Due to the use of SPI the boards are _not compatible with QMK_.

# Mistakes Were Made
The first mistake made was the use of pin B2. Although I was not planning on having compatibility with QMK, I initially used QMK on one half to test it for any issues. I discovered that the use of pin B2 as a row pin caused QMK to trigger all keys in a column whenever a key connected to that row was pressed. I checked a breadboard setup with a single key attached and it gave the same issue. The issue was consistent accross several MCUs so I concluded it was an issue with using pin B2 as a row pin with column to row diodes. B2 is a board hardware pin for booting and, as such, it has an pulldown resistor on the BlackPill. My guess is that this pulldown resistor causes problems. The issue is easily fixed in the firmware I have written. The rows are used as output lines and the columns are used as input lines. The columns are set in the code to have the internal pull-up resistors enabled so that they all normally sense high. The rows are all normally set to high. Then during the matrix sweep the rows are sequentially pulled low and the columns are read to detect any low signals (a pressed switch will pull the column line low).
